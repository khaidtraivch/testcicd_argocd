# stages:
#   - sonar_scan

# variables:
#   SONAR_HOST_URL: "http://sonarqube:9000"

# sonar_scan:
#   stage: sonar_scan
#   image: sonarsource/sonar-scanner-cli:latest
#   script:
#     - |
#       sonar-scanner \
#         -Dsonar.projectKey=khainx106_flaskbase_main \
#         -Dsonar.projectName="FlaskBase CI" \
#         -Dsonar.sources=. \
#         -Dsonar.host.url=$SONAR_HOST_URL \
#         -Dsonar.login=$SONAR_TOKEN
#   only:
#     - main
#     - develop
#     - merge_requests

stages:
  - build

build:
  stage: build
  image: docker:latest
  services:
    - name: docker:dind
      alias: docker
  variables:
    DOCKER_HOST: tcp://docker:2375
    DOCKER_TLS_CERTDIR: ""  # Tắt TLS hoàn toàn
  script:
    - docker info
    - docker version


